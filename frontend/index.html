<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logistics AI Assistant ‚Äî TMS Document Intelligence</title>
    <meta name="description"
        content="AI-powered logistics document assistant for Transportation Management Systems. Upload, query, and extract data from shipping documents.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
</head>

<body>
    <!-- Animated Background -->
    <div class="bg-animation">
        <div class="bg-orb bg-orb-1"></div>
        <div class="bg-orb bg-orb-2"></div>
        <div class="bg-orb bg-orb-3"></div>
    </div>

    <!-- Header -->
    <header id="app-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo-icon">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="url(#logo-grad)" />
                        <path d="M8 12h16M8 16h12M8 20h14M22 12l2 4-2 4" stroke="white" stroke-width="1.5"
                            stroke-linecap="round" />
                        <defs>
                            <linearGradient id="logo-grad" x1="0" y1="0" x2="32" y2="32">
                                <stop stop-color="#6366f1" />
                                <stop offset="1" stop-color="#8b5cf6" />
                            </linearGradient>
                        </defs>
                    </svg>
                </div>
                <div>
                    <h1>Logistics AI Assistant</h1>
                    <p class="subtitle">TMS Document Intelligence</p>
                </div>
            </div>
            <div class="status-badge" id="status-badge">
                <span class="status-dot"></span>
                <span>Ready</span>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <main id="app-main">
        <!-- Navigation Tabs -->
        <nav class="tab-nav" id="tab-nav">
            <button class="tab-btn active" data-tab="upload" id="tab-upload-btn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                    <polyline points="17 8 12 3 7 8" />
                    <line x1="12" y1="3" x2="12" y2="15" />
                </svg>
                Upload
            </button>
            <button class="tab-btn" data-tab="ask" id="tab-ask-btn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                </svg>
                Ask Questions
            </button>
            <button class="tab-btn" data-tab="extract" id="tab-extract-btn">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                    <line x1="3" y1="9" x2="21" y2="9" />
                    <line x1="9" y1="21" x2="9" y2="9" />
                </svg>
                Extract Data
            </button>
        </nav>

        <!-- Tab: Upload -->
        <section class="tab-panel active" id="panel-upload">
            <div class="panel-card">
                <div class="panel-header">
                    <h2>Upload Document</h2>
                    <p>Upload a logistics document (PDF, DOCX, or TXT) to begin analysis</p>
                </div>
                <div class="upload-zone" id="upload-zone">
                    <input type="file" id="file-input" accept=".pdf,.docx,.txt" hidden>
                    <div class="upload-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="1.5">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                            <polyline points="17 8 12 3 7 8" />
                            <line x1="12" y1="3" x2="12" y2="15" />
                        </svg>
                    </div>
                    <p class="upload-text">Drag & drop your file here or <span class="upload-link">browse</span></p>
                    <p class="upload-hint">Supports PDF, DOCX, TXT ‚Äî Rate Confirmations, BOL, Invoices, etc.</p>
                </div>
                <div class="upload-progress" id="upload-progress" style="display:none">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p class="progress-text" id="progress-text">Processing document...</p>
                </div>
                <div class="upload-result" id="upload-result" style="display:none">
                    <div class="result-card success">
                        <div class="result-icon">‚úì</div>
                        <div class="result-info">
                            <p class="result-title" id="result-filename"></p>
                            <p class="result-detail" id="result-detail"></p>
                            <p class="result-id">Document ID: <code id="result-doc-id"></code></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Document History -->
            <div class="panel-card" id="doc-history-card" style="display:none">
                <div class="panel-header">
                    <h2>Uploaded Documents</h2>
                </div>
                <div class="doc-list" id="doc-list"></div>
            </div>
        </section>

        <!-- Tab: Ask Questions -->
        <section class="tab-panel" id="panel-ask">
            <div class="panel-card">
                <div class="panel-header">
                    <h2>Ask Questions</h2>
                    <p>Query your uploaded document using natural language</p>
                </div>

                <!-- Document Selector -->
                <div class="form-group">
                    <label for="ask-doc-select">Select Document</label>
                    <select id="ask-doc-select" class="form-select">
                        <option value="">‚Äî Upload a document first ‚Äî</option>
                    </select>
                </div>

                <!-- Question Input -->
                <div class="question-input-group">
                    <input type="text" id="question-input" class="form-input"
                        placeholder="e.g., What is the carrier rate?" disabled>
                    <button class="btn-primary" id="ask-btn" disabled>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13" />
                            <polygon points="22 2 15 22 11 13 2 9 22 2" />
                        </svg>
                        Ask
                    </button>
                </div>

                <!-- Quick Questions -->
                <div class="quick-questions" id="quick-questions">
                    <p class="quick-label">Quick questions:</p>
                    <div class="quick-btn-group">
                        <button class="quick-btn" data-q="What is the carrier rate?">üí∞ Carrier rate</button>
                        <button class="quick-btn" data-q="When is pickup scheduled?">üìÖ Pickup date</button>
                        <button class="quick-btn" data-q="Who is the consignee?">üë§ Consignee</button>
                        <button class="quick-btn" data-q="What is the shipment weight?">‚öñÔ∏è Weight</button>
                        <button class="quick-btn" data-q="What type of equipment is required?">üöõ Equipment</button>
                        <button class="quick-btn" data-q="What are the special instructions?">üìã Instructions</button>
                    </div>
                </div>
            </div>

            <!-- Answer Display -->
            <div class="panel-card" id="answer-card" style="display:none">
                <div class="answer-header">
                    <h3>Answer</h3>
                    <div class="confidence-badge" id="confidence-badge">
                        <span class="confidence-label">Confidence:</span>
                        <span class="confidence-value" id="confidence-value">‚Äî</span>
                    </div>
                </div>

                <!-- Guardrail Alert -->
                <div class="guardrail-alert" id="guardrail-alert" style="display:none">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
                        <line x1="12" y1="9" x2="12" y2="13" />
                        <line x1="12" y1="17" x2="12.01" y2="17" />
                    </svg>
                    <span id="guardrail-text"></span>
                </div>

                <div class="answer-body" id="answer-body"></div>

                <!-- Sources -->
                <div class="sources-section" id="sources-section">
                    <h4 class="sources-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                            <polyline points="14 2 14 8 20 8" />
                        </svg>
                        Supporting Sources
                    </h4>
                    <div id="sources-list"></div>
                </div>
            </div>

            <!-- Conversation History -->
            <div class="panel-card" id="history-card" style="display:none">
                <div class="panel-header">
                    <h3>Conversation History</h3>
                    <button class="btn-ghost" id="clear-history-btn">Clear</button>
                </div>
                <div id="conversation-history"></div>
            </div>
        </section>

        <!-- Tab: Extract Data -->
        <section class="tab-panel" id="panel-extract">
            <div class="panel-card">
                <div class="panel-header">
                    <h2>Structured Extraction</h2>
                    <p>Extract key shipment data fields from your document</p>
                </div>

                <div class="form-group">
                    <label for="extract-doc-select">Select Document</label>
                    <select id="extract-doc-select" class="form-select">
                        <option value="">‚Äî Upload a document first ‚Äî</option>
                    </select>
                </div>

                <button class="btn-primary btn-full" id="extract-btn" disabled>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                        <line x1="3" y1="9" x2="21" y2="9" />
                        <line x1="9" y1="21" x2="9" y2="9" />
                    </svg>
                    Run Structured Extraction
                </button>
            </div>

            <!-- Extraction Results -->
            <div class="panel-card" id="extract-result-card" style="display:none">
                <div class="answer-header">
                    <h3>Extraction Results</h3>
                    <div class="confidence-badge" id="extract-confidence-badge">
                        <span class="confidence-label">Coverage:</span>
                        <span class="confidence-value" id="extract-confidence-value">‚Äî</span>
                    </div>
                </div>
                <div class="extract-notes" id="extract-notes"></div>
                <div class="extract-table-wrap">
                    <table class="extract-table" id="extract-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Value</th>
                            </tr>
                        </thead>
                        <tbody id="extract-tbody"></tbody>
                    </table>
                </div>
                <div class="json-output">
                    <div class="json-header">
                        <h4>Raw JSON</h4>
                        <button class="btn-ghost" id="copy-json-btn">üìã Copy</button>
                    </div>
                    <pre><code id="json-output"></code></pre>
                </div>
            </div>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay" style="display:none">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p id="loading-text">Processing...</p>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <script src="./app.js"></script>
</body>

</html>